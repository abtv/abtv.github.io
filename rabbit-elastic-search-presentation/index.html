<!DOCTYPE html>
<html>
  <head>
    <title>Очереди и полнотекстовый поиск в современном бэкенде</title>
    <meta charset="utf-8">
    <style>
      p {
      	font-size: 24pt;
      }
      li {
        font-size: 24pt;	
      }
      
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

## Очереди и полнотекстовый поиск в современном бэкенде

Андрей Бутов

Clojure/ClojureScript разработчик

[https://github.com/abtv](https://github.com/abtv)

---

### RabbitMQ

RabbitMQ - это ПО-посредник, осуществляющее обмен сообщениями между различными приложениями.

Используется:
* Google
* SoundCloud
* VMware
* Travis CI
* ...

---

###Зачем?

- decoupling (общая шина для нескольких сервисов)
- масштабируемость (конвейерная архитектура - очень хорошо подходит для stateless обработки)
- надежная доставка сообщений
- восстановление после сбоев
- отказоустойчивость

---

###Особенности RabbitMQ
- полностью программируемая конфигурация
- гарантия доставки сообщений
- очень гибкий, большое количество настроек и плагинов

---

###Основные сущности

![example](hello-world-example-routing.png)

---

###Зачем нужны exchanges, почему не публиковать сообщения прямо в очереди?
- fanout (1 сообщение отправляется в N очередей)
- topic (маршрутизация осуществляется на основе routing key, в т.ч. с * и #)

---

###Особенности

* Exchange/queue durability
* Message acknowledgement (auto/manual)
* Message persistence
* Message metadata
* QOS (когда мы используем manual ack)
* Virtual hosts

---

###ElasticSearch

ElasticSearch - это сервер для индексации и полнотекстового поиска, основанный на библиотеке Lucene.

Используется:
- Netflix
- SoundCloud
- eBay
- New York Times
- ...

---

###Зачем?

- быстрая индексация данных
- различные виды поиска
- масштабируемость
- отказоустойчивость

---

###Внимание! Не является заменой БД в общем случае:

- нет транзакций
- near real time

---

###Внутреннее устройство

Каждый шард - это индекс Lucene (не путать с индексом ElasticSearch). Поиск будет осуществляться в каждом из индексов, а затем информация будет агрегироваться для выдачи клиентской библиотеке.

Если индекс большой, то нам нужно больше шардов. Количество шардов нужно задавать при создании индекса. Выкрутиться можно, создав rolling indices с одним общим alias (по нему будут выполняться запросы).

---

## Спасибо за внимание

https://github.com/abtv

    </textarea>
    <script src="remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>