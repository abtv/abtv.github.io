<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>English trainer</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
</head>
<style>
	.starter-template {
  padding: 40px 15px;
  text-align: center
;}
</style>
<script src="./javascripts/jquery-2.1.1.min.js"></script>
<script src="./javascripts/menu.js"></script>
<script src="./bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" charset="utf-8">
	var words;
	var currentWord;
	var isForeign;
	var isShowPronunciation;
	function setNewWord(){
		var index = Math.floor(Math.random() * words.length - 1);
		if (index < 0){ return; }
		currentWord = words[index];
		isForeign = true;
		showCurrent();
	}
	function showCurrent(){
		var text;
		if (isForeign){
			text = isShowPronunciation ? currentWord.foreign + " " + currentWord.pronunciation : currentWord.foreign;
		}
		else {	
			text = currentWord.motherTongue;
		}
		$('#divWord').text(text);
	}
	function switchText(){
		isForeign = !isForeign;
		showCurrent();
	}
	var client = new XMLHttpRequest();
	client.open('GET', '/dict.txt');
	client.onreadystatechange = function() { 
		words = client.responseText
		.split('\n')
		.map(function(el){
			var word = el.split('\t');
			return {
				foreign: word[0],
				pronunciation: word[1],
				motherTongue: word[2]
			};
		}); 
		setNewWord();
	};
	client.send();

	function showPronunciation(show){
		isShowPronunciation = show;
		if (show){
			$("#showPron").addClass("btn btn-info");
			$("#dontShowPron").removeClass();
		}
		else {
			$("#showPron").removeClass();
			$("#dontShowPron").addClass("btn btn-info");
		}
		showCurrent();
	}
</script>
<script>
	$(document).ready(function(){
		createMenu("trainer.html");
		showPronunciation(true);
	});
</script>
<body>
	<div class="container">	
		<div class="starter-template">
	        <h2>My personal English trainer</h2>
    	</div>
	    <div class="dropdown">
	      <a href="#" class="btn btn-lg btn-success" data-toggle="dropdown">Options</a>
	      <ul class="dropdown-menu" role="menu">
	        <li><a href="#" class="btn btn-lg btn-success">Easy words</a></li>
	        <li><a href="#" class="btn btn-warning">Normal words</a></li>
	        <li><a href="#" class="btn btn-danger">Hard words</a></li>
	        <li class="divider"></li>
	        <li><a id="showPron" href="#" onclick="showPronunciation(true)">Show pronunciation</a></li>
	        <li><a id="dontShowPron" href="#" onclick="showPronunciation(false)">Don't show pronunciation</a></li>
	      </ul>
	    </div>
	    <div class="starter-template">
			<Button id="newButton" class="btn btn-lg btn-success" onclick="setNewWord()">know word</Button>
			<Button id="dontKnowButton" class="btn btn-lg btn-warning" onclick="switchText()">don't know word</Button>
		  	<div style="padding: 10px;font-size: 18pt" id="divWord"/>
    	</div>
    </div>
</body>
</html>