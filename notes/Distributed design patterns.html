<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Distributed design patterns</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="https://abtv.github.io/_next/static/css/a1fbee3691b148f2.css" as="style" crossorigin=""/><link rel="stylesheet" href="https://abtv.github.io/_next/static/css/a1fbee3691b148f2.css" crossorigin="" data-n-g=""/><link rel="preload" href="https://abtv.github.io/_next/static/css/a03d659508f3afe9.css" as="style" crossorigin=""/><link rel="stylesheet" href="https://abtv.github.io/_next/static/css/a03d659508f3afe9.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="https://abtv.github.io/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="https://abtv.github.io/_next/static/chunks/webpack-47782a12e0395abb.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/chunks/framework-66d32731bdd20e83.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/chunks/main-bac2f07e2c919777.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/chunks/pages/_app-1b08a80b16427f14.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/chunks/996-2621915a071d1e63.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/chunks/571-da704684b252df24.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/chunks/pages/notes/%5Bid%5D-553b907150695e63.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/8G6oB3BauYxPsdW56_8Od/_buildManifest.js" defer="" crossorigin=""></script><script src="https://abtv.github.io/_next/static/8G6oB3BauYxPsdW56_8Od/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="page-wrapper"><div class="page-content"><div class="Post_article__R4DND"><div class="Post_header__RxYh4"><a href="/">‚Üê Main page</a></div><div class="Post_header__RxYh4"><h2>Distributed design patterns</h2></div><main class="Post_main__X4Tic"><div class="Post_grid__Qmbf3"><div class="note-wrapper"><h3>Circuit breaker</h3>
<p>This pattern prevents a retry storm when a service is degraded and can&#x27;t recover because it&#x27;s clients use Retry pattern and create extra load to the service.
A circuit breaker acts as a proxy for operations that might fail. The proxy can be in the following states:</p>
<ol>
<li><strong>Closed</strong>: the Circuit Breaker allows to execute all requests but it counts number of failures. If number of failures exceed a given threshold for some period of time then the Circuit Breaker goes to Open state and starts a timer. When the timer ends the Circuit Breaker will go to Half-open state. The timeout gives time to the service to recover.</li>
<li><strong>Open</strong>: a request to the service fails immediately.</li>
<li><strong>Half-open</strong>: a very limited number of requests is allowed to be executed and if they are successful then the Circuit Breaker goes to Closed state otherwise it goes to Open state.</li>
</ol>
<h3>Index table</h3>
<p>NoSQL database may support only primary key indexing.</p>
<p>If we need to implement a fast search by a non-primary key field we can create an &quot;index table&quot; which has the field as a primary key and has a pointer to the main table.</p>
<h3>Retry with backoff</h3>
<p>An API call may fail due to different transient problems: network connectivity issues or temporal service unavailability.</p>
<p>To solve the issue a service can implement several attempts to retry an API call with a delay between the attempts. The delay may be random in a given range or exponential (also in a given range).</p>
<p>Retries may create a retry storm and to avoid it you may need to implement a Circuit Breaker.</p>
<p>Always specify a timeout for a network request.</p>
<p>Your API calls should be idempotent.</p></div></div></main></div></div><footer class="page-footer">Last updated in 2024</footer></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"title":"Distributed design patterns","content":"### Circuit breaker\nThis pattern prevents a retry storm when a service is degraded and can't recover because it's clients use Retry pattern and create extra load to the service.\nA circuit breaker acts as a proxy for operations that might fail. The proxy can be in the following states:\n1. **Closed**: the Circuit Breaker allows to execute all requests but it counts number of failures. If number of failures exceed a given threshold for some period of time then the Circuit Breaker goes to Open state and starts a timer. When the timer ends the Circuit Breaker will go to Half-open state. The timeout gives time to the service to recover.\n2. **Open**: a request to the service fails immediately.\n3. **Half-open**: a very limited number of requests is allowed to be executed and if they are successful then the Circuit Breaker goes to Closed state otherwise it goes to Open state.\n\n### Index table\nNoSQL database may support only primary key indexing.\n\nIf we need to implement a fast search by a non-primary key field we can create an \"index table\" which has the field as a primary key and has a pointer to the main table.\n\n### Retry with backoff\nAn API call may fail due to different transient problems: network connectivity issues or temporal service unavailability.\n\nTo solve the issue a service can implement several attempts to retry an API call with a delay between the attempts. The delay may be random in a given range or exponential (also in a given range).\n\nRetries may create a retry storm and to avoid it you may need to implement a Circuit Breaker.\n\nAlways specify a timeout for a network request.\n\nYour API calls should be idempotent.\n"},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"Distributed design patterns"},"buildId":"8G6oB3BauYxPsdW56_8Od","assetPrefix":"https://abtv.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>