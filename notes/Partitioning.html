<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Partitioning</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="https://abtv.github.io/_next/static/css/b7a7f134ba51c438403b.css" as="style"/><link rel="stylesheet" href="https://abtv.github.io/_next/static/css/b7a7f134ba51c438403b.css" data-n-g=""/><link rel="preload" href="https://abtv.github.io/_next/static/css/8c36cfe3a77cd2e0c2bb.css" as="style"/><link rel="stylesheet" href="https://abtv.github.io/_next/static/css/8c36cfe3a77cd2e0c2bb.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://abtv.github.io/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="https://abtv.github.io/_next/static/chunks/webpack-ea2473d7256b97f36886.js" defer=""></script><script src="https://abtv.github.io/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="https://abtv.github.io/_next/static/chunks/main-d1e3ce7bd5cd46c1581b.js" defer=""></script><script src="https://abtv.github.io/_next/static/chunks/pages/_app-68998cd3c2087b94033f.js" defer=""></script><script src="https://abtv.github.io/_next/static/chunks/832-1d93ef3dd096bfa087f2.js" defer=""></script><script src="https://abtv.github.io/_next/static/chunks/pages/notes/%5Bid%5D-63cdc919fe449cbe88aa.js" defer=""></script><script src="https://abtv.github.io/_next/static/vTIWPAo8nFavP_RbMOY3l/_buildManifest.js" defer=""></script><script src="https://abtv.github.io/_next/static/vTIWPAo8nFavP_RbMOY3l/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="page-wrapper"><div class="page-content"><div class="Post_article__f3v0Q"><div class="Post_header__2s4s1"><a href="/">← Main page</a></div><div class="Post_header__2s4s1"><h2>Partitioning</h2></div><main class="Post_main__2fGnD"><div class="Post_grid__1uhVO"><div class="note-wrapper"><h3>Partitioning</h3>
<p>Partitioning is a process of storing one dataset in several partitions in one dataset. Usually each node stores one or some  small subset of partitions. This allows to svale whenthe whole dataset is too big to be handled by a single node.</p>
<p>Usually partitioning is used in combination with replication.</p>
<h3>Partitioning by key range</h3>
<p>Data can be partitioned by key range. This approach is simple and allows to make range requests fast.</p>
<p>On the other hand, this approach is prone to create hot spots. Hot spot is a node which has too much data comparing to other nodes.</p>
<h3>Partitioning by hash key</h3>
<p>Data can be partitioned not by key itself but its hash. This approach creates more uniformed distribution of data.</p>
<p>On the other hand, range queries will require to hit all partitions and it will be slower. It will be as slow as the slowest partition response.</p>
<h3>Partitioning and secondary indexes</h3>
<ol>
<li>If secondary infeces are supported it will require to hit all partitions to run a query.</li>
<li>We can also partition secondary index itself by term: some range of terms will be stored in one partition, some in another, etc. This approach has the same downside as with followers: writes to some nodes may be slower than to other nodes and we will not be able to read the written fata immediately.</li>
</ol>
<h3>Rebalancing partitions</h3>
<p>TODO</p>
<h3>Request routing</h3>
<p>TODO</p>
<h3>Related notes</h3>
<ul>
<li><a href="/notes/Engineering">Engineering →</a></li>
</ul></div></div></main></div></div><footer class="page-footer"><a href="/">Andrey Butov 2014-2021</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Partitioning","content":"### Partitioning\nPartitioning is a process of storing one dataset in several partitions in one dataset. Usually each node stores one or some  small subset of partitions. This allows to svale whenthe whole dataset is too big to be handled by a single node.\n\nUsually partitioning is used in combination with replication.\n\n### Partitioning by key range\nData can be partitioned by key range. This approach is simple and allows to make range requests fast.\n\nOn the other hand, this approach is prone to create hot spots. Hot spot is a node which has too much data comparing to other nodes.\n\n### Partitioning by hash key\nData can be partitioned not by key itself but its hash. This approach creates more uniformed distribution of data.\n\nOn the other hand, range queries will require to hit all partitions and it will be slower. It will be as slow as the slowest partition response.\n\n### Partitioning and secondary indexes\n1. If secondary infeces are supported it will require to hit all partitions to run a query.\n2. We can also partition secondary index itself by term: some range of terms will be stored in one partition, some in another, etc. This approach has the same downside as with followers: writes to some nodes may be slower than to other nodes and we will not be able to read the written fata immediately.\n\n### Rebalancing partitions\nTODO\n\n### Request routing\nTODO\n\n### Related notes\n- [Engineering \u0026rarr;](/notes/Engineering)"},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"Partitioning"},"buildId":"vTIWPAo8nFavP_RbMOY3l","assetPrefix":"https://abtv.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>